<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="shortcut icon" href="logo.png" type="image/x-icon">
    <title>WildSpin</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            background-image: url(foto2.png);
        }

        section {  
            height: 100%;
            scroll-snap-align: start;
            
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            margin-top: 100%;
        }
        .slot {
            position: absolute;
            width: 250px;
            height: 400px;
            background-color: rgba(202, 202, 202, 0);
            font-size: 7vw;
            border-radius: 20px;
            filter: brightness(0.85);
        }

        .slot1 { bottom: 15%; left: 7%; }
        .slot2 { bottom: -10%; left: 7%; }
        .slot3 { bottom: 15%; left: 30%;}
        .slot4 { bottom: -10%; left: 30%; }
        .slot5 { bottom: 15%; left: 51%; }
        .slot6 { bottom: -10%; left: 51%; }
        .slot7 { bottom: 15%; left: 73%; }
        .slot8 { bottom: -10%; left: 73%; }

        #corpo {
            display: flex;
            flex-direction: column;
            
            width: 70%;
            height: 100%;
            display: flex;
            background-color: cadetblue;
            align-items: center;
            background-image: url(foto2.png);
            margin-top: 100%;
        }
        #corpo {
            width: 7cqb;
            height: 100%;
            display: flex;
            background-color: cadetblue;
            align-items: center;
            background-image: url(foto2.png);
            
        }

        .sfondo {
            position: absolute;
           
            top: -12%;
            width: 78%;
            height: 108%;
            border-radius: 13%;
            border: 2px solid rgb(46, 46, 46); 
            background-color: rgb(75, 75, 75);
            left: 12%;  
            justify-content: center; /* centra il contenuto lungo l'asse principale (orizzontalmente) */      
            display: flex;
        }

        .immagine {
            position: absolute;
            left: -10%;
            top: 87%;
            border: 3px #000 solid;
            border-radius: 10px;
            width: 10vw;
            height: 4vw;
            z-index: 999;
        }



        .button2, .button3, .button4, .button10, .button20, .button50 {
            width: 128px;
            height: 128px;
            border-radius: 27px;
            position: absolute;
            top: 102%;
            font-size: 30px;
            
            border: 1.5px #000 solid;
            color: burlywood;
            border-radius: 100%;
            
        }
        .button10 span, .button20 span, .button4 span, .button50 span, .button3 span {
            display: inline-block;
            vertical-align: middle;
            line-height: middle;
            top: 36%;
            position: absolute;
            left: 33%;
            font-family: sans-serif;
            color: #ffffff;
            -webkit-text-stroke-color: #000 ;
            -webkit-text-stroke-width: 0.5px
            
        }
        .button2 span{
            display: inline-block;
            vertical-align: middle;
            line-height: middle;
            top: 36%;
            position: absolute;
            left: 20%;
            font-family: sans-serif;
            -webkit-text-stroke-color: #000 ;
            -webkit-text-stroke-width: 0.5px;
            color: #ffffff;
        }

        .button2 { left: 2px; }
        .button3 { left: 12%; } /* Modificato per correggere il posizionamento */
        .button4 { left: 23.5%; }
        .button10 { left: 69%; }
        .button20 { left: 80%; } /* Modificato per correggere il posizionamento */
        .button50 { left: 91%; } /* Modificato per correggere il posizionamento */

        .button2:hover, .button3:hover, .button4:hover, .button10:hover, .button20:hover, .button50:hover{
            filter: brightness(0.8);
        }

        .a_href {
            width: 150px;
            height: 80px;
            background-color: aliceblue;
            border-radius: 20px;
            font-size: 30px;
            left: 15px;
            position: absolute;
            top: 15px;
            border: #000 3px solid;
        }

        /* Stili per la prima sezione */
        section:first-child {
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            flex-direction: column;
        }

        section:first-child .sfondo {
            background-image: url(immagine1.png);
            background-size: cover;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            border-radius: 0;
            border: none;
        }

        section:first-child .immagine {
            display: none;
        }

        section:first-child .HUGE {
            color: rgb(255, 251, 0);
            font-size: 80px;
            -webkit-text-stroke-width: 0px;
            -text-stroke-width: 2px #000 solid;
            margin-bottom: 20px;
        }

        section:first-child p {
            font-size: 24px;
            color: #fff;
            margin-bottom: 20px;
        }

        section:first-child .button {
            font-size: 32px;
            background-color: #ffcc00;
            color: #000;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
        
        section {  
            height: 100%; /* Altezza della sezione, in questo caso, occupa l'intera altezza della viewport */
            scroll-snap-align: start; /* La sezione si allinea con l'inizio della viewport durante lo scorrimento */
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            margin-top: 100%;
        }

        #corpo {
            width: 100%;
            height: 100%;
            display: flex;
            background-color: cadetblue;
            align-items: center;
            background-image: url(foto2.png);
            
        }

        .button {
            width: 28%;
            height: 18%;
            border-radius: 0px;
            position: absolute;
            border-radius: 15%;
            top: 100%;
            
            border: none;
            font-size: 40px;
            color: brown;
            
            
            left: 37%;
        }

        .score {
            position: absolute;
            font-size: 2vw;
            font-family: fantasy;
            color: cornsilk;
            top: 78%;
            right: 85%;
            font-size: 2vw;
            font-style: italic;
            z-index: 999;
            
            
            
        }

        #corpo_slots {
            display: flex;
            position: absolute;
            background-color: rgba(100, 148, 237, 0);
            width: 70%;
            height: 70%;
            justify-content: center;
            left: 265px;
            background-image: url(magia.png);
            top: 12.5%;
        }

      

        .HUGE {
            color: rgb(255, 251, 0);
            font-size: 250px;
            position: absolute;
            left: 20%;
            -webkit-text-stroke-color: #000;
            -webkit-text-stroke-width: 3px  ;
            top: -20%;
            z-index: 999
            
        }
      

        


        .a_href {
            width: 150px;
            height: 80px;
            background-color: aliceblue;
            border-radius: 20px;
            font-size: 30px;
            left: 15px;
            position: absolute;
            top: 15px;
            border: #000 3px solid;
        }
        .tutto{           
            display: flex;
            flex-direction: column;
            height: 200%; /* Altezza totale delle due sezioni (100% per ogni sezione) */
        }
        #paypal-button-container {
            position: absolute ;
            width: 22vw;
            height: 6vw;
            left: 25%;
            top: 60%;
           
        }
    


        .corpo {
            background-color: rgb(202, 202, 202);
            position: absolute;
            width: 65vw;
            height: 40vw;
            left: 18%;
            top: 18%;
            border-radius: 50px;
            right: 15%;
            border: 3px solid #000000;
        }
 
        .wrote {
            position: absolute;
            font-size: 4vw;
            color: rgb(35, 57, 58);
            left: 25%;
            top: -7%;
        }

        .things {
            position: absolute;
            width: 65%;
            height: 80%;
            background-color: rgb(209, 209, 209);
            right: 17%;
            top: 12%;
            border-radius: 35px;
            border: #000000 solid 2px;
        }

        .input {
            width: 15vw;
            height: 2vw;
            border-radius: 15px;
            position: absolute;
            left: 57%;
            top: 15%;
        }
        .soto{
        
            background-color: gray;
            height: 100%;
            position: absolute;
            top: 50px;
            left: 15%;
        }
        .button:hover{
            filter: brightness(0.8);
        }
        /* Aggiungi questo nel tuo foglio di stile CSS */
        
        @keyframes fall {
            0% {
            transform: translateY(-100%);
            }
            100% {
            transform: translateY(0);
            }
        }


        .slot-symbol {
            animation: fall 0.5s ease-out;
        }
        .abcimm{
            width: 220px;
            height: 85px;
            border-radius: 0px;

        }
        .withdraw_{
            
            width: 65vw;
            height: 40vw;
            position: absolute;
            border: #000 solid 3px;
            border-radius: 75px;
            top: 100vw; 
            background-color: rgb(175, 175, 175); 
            left: 17vw;
        }   
        #somma{
            width: 200px;
            height: 100px;
        }
        #a{    
            width: 65%;
            height: 80%;
            position: absolute;
            right: 15%;
            background-color: rgb(180, 180, 180) ;
            border-radius: 20px;
            font-size: 50px;
            border: 2px solid  #000;
        }
        #email{
            width: 280px;;
            height: 45px;
            position: absolute;
            top: 150px;
            left: 460px;
            border-radius: 15px;
        }
        #Amount{
            width: 12vw;;
            height: 2vw;
            position: absolute;
            left: 23vw;
            top: 10vw;
            border-radius: 15px;
        }

        label{
            position: absolute;
            left: 28%;
        }
        .label{
            top: 140px;
        }
        .label2{
            top: 10vw;
            font-size: 2.2vw;
        }
        .INVIA{
            width: 8vw;
            height: 3.5vw;
            font-size: x-large;
            position: absolute;
            right: 16vw;
            top: 55%;
        }


        #STO{
            width: 35%;
            height: 7%;
            background-color: #f0f0f0;
            font-family:'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            font-size: 1.2vw;
            position: absolute;
            left: 0%;
            top: 0%;
            border-radius: 20%;
            background-image: url(saldo.png);
            border: #000 solid 3px;
            color: rgb(49, 1, 49);
            z-index: 999;
            
        }    
        
        #overlay {
            display: none; /* Inizialmente nascosto */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Grigio con opacità del 50% */
            z-index: 9999; /* Assicura che il div sia sopra a tutti gli altri elementi */
            pointer-events: none; /* Impedisce l'interazione con il div */
        }
      
    </style>
</head>

<body>
    <div id="tutto">
        

        
        <div id="corpo">
            <div style="background-color: #000; width: 100%; height: 5%;"></div>
            
            <div id="corpo_slots" >
                

                
                <div class="sfondo">  
                    <img src="slo.png" style="width: 100%; height: 100%;">
                    <img src="PHOTO/sopra.png" style="position: absolute; top: 0%; left: 0%; z-index: 999; width: 100%; height: 30.4%;">
                    <img src="PHOTO/ricco.png" style="position:absolute; left: -35%; z-index: 999; top: 24%; width: 57.2%;">
                    <div style="background-color: gray;width: 15%; height: 5%;position: absolute; left: -40%; border: #000 2px solid;border-radius: 15%; top: 114%;">
                        <a href="#vv" style="position: absolute; top: 10%; left: 20%; font-size: 85%; color: #ffcc00; z-index: 999; text-decoration-line: none;">MAKE A DEPOSIT</a>
                    </div>
                    <div style="background-color: gray;width: 15%; height: 5%;position: absolute; left: -40%; border: #000 2px solid;border-radius: 15%; top: 120%;">
                        <a href="#ABB" style="position: absolute; top: 10%; left: 20%; font-size: 100%; color: #ffcc00; z-index: 999; text-decoration-line: none;">Withdraw</a>
                    </div>
                    <button onclick="Fa()" style="width: 10%; height: 7% ;position: absolute; left: 150%; top: -18%;font-size: 25px; background-color: #fffd89;"></button>
                    <div id="STO"></div>
                    <img src="conto.png" class="immagine">
                    <div class="slot slot1" id="reel1"></div>
                    <div class="slot slot2" id="reel2"></div>
                    <div class="slot slot3" id="reel3"></div>
                    <div class="slot slot4" id="reel4"></div>
                    <div class="slot slot5" id="reel5"></div>
                    <div class="slot slot6" id="reel6"></div>
                    <div class="slot slot7" id="reel7"></div>
                    <div class="slot slot8" id="reel8"></div>


                    <h1 id="blinkingText" class="HUGE">HUGE WIN!</h1>
                    <h1 id="Win" class="HUGE">WIN!</h1>
                </div>
                <img src="PHOTO/fut.png" onclick="spin()" class="button" id="myButton"></button>
                <img src="button.png" id="bottoneAggiungi1" class="button2" onclick="sce(0.20)"  style="width: 9.45%; height: 19.8%;"><span> €0.20</span>
                <img src="button.png" id="bottoneAggiungi2" class="button3" onclick="sce(1)"  style="width: 9.45%; height: 19.8%;"><span>€1</span></button>
                <img src="button.png" id="bottoneAggiungi3" class="button4" onclick="sce(2)"  style="width: 9.45%; height: 19.8%;"><span>€2</span></button>
                <img src="button.png" id="bottoneAggiungi10" class="button10" onclick="sce(5)"  style="width: 9.45%; height: 19.8%;"><span>€5</span></button>
                <img src="button.png" id="bottoneAggiungi20" class="button20" onclick="sce(10)" style="width: 9.45%; height: 19.8%;"><span>€10</span></button>
                <img src="button.png" id="bottoneAggiungi50" class="button50" onclick="sce(20)" style="width: 9.45%; height: 19.8%;"><span>€20</span></button>
                <p id="score" class="score"></p>
               
            </div>
        </div>
        <section>
            <div class="soto" id="AHAH">
                
                <div class="corpo" style="display: flex; top: 50vw; background-color: rgb(175, 175, 175); left: 2vw;">
                    <h1 class="wrote" id="vv">MONEY DEPOSIT</h1>
                    <div class="things">
                        <div id="paypal-button-container"></div>
                        <input type="number" placeholder="amount in €..." class="input" id="informazione" step="1" min="0" required></input>
                        <label for="informazione" style="display: flex; top: 15%; left: 3%; font-size: 1.4vw;">the amount of money you want<br> to deposit</label>
                    </div>
                </div>
            </div>

            <div class="withdraw_">
                
                <div>
                    <center style="font-size: 4vw;" id="ABB">Withdraw</center>
                </div>

                <form id="totale" action="/ricevi-informazioni" method="post">
                    <div id="a">


                        <label for="Amount" class="label2">Amount:</label>
                        <input type="Amount" id="Amount" name="Amount" required>
                        <button type="submit" onclick="inviaMessaggio()" class="INVIA" id="gaga">get</button>
                        <div id="overlay"></div>
                    </div>
                </form>
               
            </div>
        </section>
    </div>
    <script>var symbols = [" 🍊", " 🍈", " 🍉", " 🍑", " 🍌"]; const mlml = "€"</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script>eval(atob("bGV0IGFiYyA9IDA7CgpsZXQgY3JlZApsZXQgWklPUEVSQUFBID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNjb3JlIik7CmxldCBpbmZvOwpsZXQgYW1vdW50VmFsdWU7CmNvbnN0IHNvY2tldCA9IG5ldyBXZWJTb2NrZXQoJ3dzOi8vbG9jYWxob3N0OjgwODAnKTsKCgoKc3Nzc3MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYWJjIikKCgp3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICBzYXNzID0gYXRvYihzc3NzcykKICAgIFpJT1BFUkFBQS5pbm5lclRleHQgPSBzYXNzCgp9CgoKCmNvbnN0IHVzZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcicpCmZ1bmN0aW9uIGlucygpewogICAgdXNlci5pbm5lclRleHQgPSBteVZhcgp9Cgp2YXIgQWthRyA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ215JykKCgpmdW5jdGlvbiBGYSgpewogICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiZ2FtZXMuaHRtbD9teVZhcj0iICsgIGVuY29kZVVSSUNvbXBvbmVudChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbXknKSk7Cn0gCgoKCmZ1bmN0aW9uIGdvX3BhZ2UoKXsKICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gIlNMT1QuSFRNTD9teVZhcj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ0NSRUQnKSk7Cn0KCmZ1bmN0aW9uIGR1YygpewogICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAic29jY2VyLmh0bWw/bXlWYXI9IiArIGVuY29kZVVSSUNvbXBvbmVudChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdDUkVEJykpOwp9CgpmdW5jdGlvbiB2YWkoKXsKICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gInNwb3J0Lmh0bWw/bXlWYXI9IiArIGVuY29kZVVSSUNvbXBvbmVudChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdDUkVEJykpOwp9CgpmdW5jdGlvbiBkdWNlKCl7CiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICJzb2NjZXIuaHRtbD9teVZhcj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ0NSRUQnKSk7Cn0KCmZ1bmN0aW9uIGdvaW5nKCl7CiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICJXaWxkU3Bpbi5IVE1MP215VmFyPSIgKyBlbmNvZGVVUklDb21wb25lbnQoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnQ1JFRCcpKTsKfSAKCmZ1bmN0aW9uIGcoKXsKICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gIk1vbmV5RWFybi5odG1sP215VmFyPSIgKyBlbmNvZGVVUklDb21wb25lbnQoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnQ1JFRCcpKTsKfQoKZnVuY3Rpb24gYWJyYSgpewogICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAibG90dGVyeS5odG1sP215VmFyPSIgKyBlbmNvZGVVUklDb21wb25lbnQoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnQ1JFRCcpKTsKfQoKZnVuY3Rpb24gYWIoKXsKICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gInNjaGVkaW5hLmh0bWw/bXlWYXI9IiArIGVuY29kZVVSSUNvbXBvbmVudChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdDUkVEJykpOwp9Cgpjb25zdCBha2EgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWthIik7CgpaSU9QRVJBQUEuaW5uZXJUZXh0ID0gYXRvYihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYWJjIikpLnRvRml4ZWQKCi8vIEZ1bnppb25lIGNoaWFtYXRhIGFsIGNhcmljYW1lbnRvIGRlbGxhIHBhZ2luYQp3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAvLyBDb250cm9sbGEgc2UgYyfDqCB1biB2YWxvcmUgY3JpdHRvZ3JhZmF0byBzYWx2YXRvIG5lbCBsb2NhbFN0b3JhZ2UKICAgIGlmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdDYWxjJykpIHsKICAgICAgICAvLyBEZWNyaXR0b2dyYWZhIGlsIHZhbG9yZSBlIGxvIG1vc3RyYSBhIHNjaGVybW8KICAgICAgICBjb25zdCB2YWxvcmVEZWNyaXR0b2dyYWZhdG8gPSBkZWNyaXR0b2dyYWZhKCk7CiAgICAgICAgWklPUEVSQUFBLmlubmVyVGV4dCA9IGF0b2IobG9jYWxTdG9yYWdlLmdldEl0ZW0oImFiYyIpKQogICAgfSBlbHNlIHsKICAgICAgICAvLyBTZSBub24gYyfDqCBuZXNzdW4gdmFsb3JlIGNyaXR0b2dyYWZhdG8gc2FsdmF0bywgZ2VuZXJhIHVuIG51bWVybyBjYXN1YWxlIGUgY3JpdHRvZ3JhZmEvc2FsdmEKICAgICAgICBjb25zdCB2YWxvcmVDYXN1YWxlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKSArIDE7IC8vIEdlbmVyYSB1biBudW1lcm8gY2FzdWFsZSB0cmEgMSBlIDEwMAogICAgICAgIGNyaXR0b2dyYWZhRVNhbHZhKHZhbG9yZUNhc3VhbGUpOwogICAgfQogICAgc3NzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FiYycpOwogICAgc2FhcyA9IGF0b2Ioc3NzKQoKICAgIC8vIE1vc3RyYSBpbCB2YWxvcmUgY3JpdHRvZ3JhZmF0byBhIHNjaGVybW8KICAgIFpJT1BFUkFBQS5pbm5lclRleHQgPSBzYWFzCn07CmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjJywgYWJjLnRvRml4ZWQoMikpCi8vIEZ1bnppb25lIGNoaWFtYXRhIHF1YW5kbyBsJ3V0ZW50ZSBwcmVtZSBpbCBwdWxzYW50ZSAiU290dHJhaSAyIgpmdW5jdGlvbiBzb3R0cmFpRHVlKCkgewogICAgLy8gUmVjdXBlcmEgaWwgdmFsb3JlIGRlY3JpdHRvZ3JhZmF0byBlIHNvdHRyYWUgMgogICAgY29uc3QgdmFsb3JlRGVjcml0dG9ncmFmYXRvID0gZGVjcml0dG9ncmFmYSgpOwogICAgY29uc3QgbnVvdm9WYWxvcmUgPSB2YWxvcmVEZWNyaXR0b2dyYWZhdG8gLT0gMjsKCiAgICAvLyBNb3N0cmEgaWwgbnVvdm8gdmFsb3JlIGRlY3JpdHRvZ3JhZmF0byBhIHNjaGVybW8KICAgIFpJT1BFUkFBQS5pbm5lclRleHQgPSBudW92b1ZhbG9yZTsKCiAgICAvLyBDcml0dG9ncmFmYSBpbCBudW92byB2YWxvcmUgZSBzYWx2YWxvIG5lbCBsb2NhbFN0b3JhZ2UKICAgIGFnZ2lvcm5hYWJjKG51b3ZvVmFsb3JlKQp9CgoKCmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdtYScsIGFiYy50b0ZpeGVkKDIpKQoKCgoKZnVuY3Rpb24gZ2V0UGFyYW1ldGVyQnlOYW1lKG5hbWUsIHVybCkgewogICAgaWYgKCF1cmwpIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwogICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xbXF1dL2csICJcXCQmIik7CiAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCJbPyZdIiArIG5hbWUgKyAiKD0oW14mI10qKXwmfCN8JCkiKSwKICAgICAgICByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpOwogICAgaWYgKCFyZXN1bHRzKSByZXR1cm4gbnVsbDsKICAgIGlmICghcmVzdWx0c1syXSkgcmV0dXJuICcnOwogICAgbXlWYXIgPSBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cKy9nLCAiICIpKTsKICAgIHJldHVybiBteVZhcjsgLy8gTW9kaWZpY2EgcXUKfQoKdmFyIG15VmFyID0gZ2V0UGFyYW1ldGVyQnlOYW1lKCdteVZhcicpOwoKUXVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdTVE8nKQoKUXVhZC5pbm5lclRleHQgPSBteVZhcjsKZnVuY3Rpb24gc2VzZShhc2EpIHsKICAgIHZhciB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpOwogICAgdmFyIHogPSB1cmxQYXJhbXMuZ2V0KCdteVZhcicpOwogICAgY29uc3QgZGF0aWZyID0gewogICAgICAgIG5vbWU6IGFzYSwKICAgICAgICBlbWFpbDogegogICAgfTsKICAgICAgCiAgICBmZXRjaCgnaHR0cHM6Ly9seWluZy1hZGhlc2l2ZS1jaGVmLmdsaXRjaC5tZS9zYWx2YS1kYXRpJywgewogICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgfSwKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRpZnIpLAogICAgfSkKICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yZSBuZWxsYSByaWNoaWVzdGEgYWwgc2VydmVyJyk7CiAgICB9CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTsKICAgIH0pCiAgICAudGhlbihkYXRhID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsgLy8gRGF0aSBzYWx2YXRpIGNvbiBzdWNjZXNzbwogICAgfSkKICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3JlOicsIGVycm9yKTsKICAgIH0pOwp9CmZ1bmN0aW9uIGFnZ2lvcm5hYWJjKG51b3ZvVmFsb3JlKSB7CiAgICBhYmMgPSBudW92b1ZhbG9yZTsKICAgIHNleCA9IGJ0b2EoYWJjKQogICAgc2VzZShhYmMpCgoKICAgIHRyeSB7CiAgICAgICAgCiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImFiYyIsIHNleCkKICAgICAgICBjb25zb2xlLmxvZygiVmFsb3JlIGRlbCBhYmMgc2FsdmF0byBuZWxsbyBzdG9yYWdlIGNvbiBzdWNjZXNzby4iKTsKICAgICAgICBaSU9QRVJBQUEuaW5uZXJUZXh0ID0gbWxtbCArIGFiYy50b0ZpeGVkKDIpCiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yZSBkdXJhbnRlIGlsIHNhbHZhdGFnZ2lvIG5lbCBsb2NhbFN0b3JhZ2U6IiwgZXJyb3IpOwogICAgfQoKfQpjb25zdCBiZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmV0JykKCmZ1bmN0aW9uIHNjZSh2YWxvcmUpewogICAgdmFsb3JlTnVtZXJpY28gPSB2YWxvcmUKICAgIGJldC5pbm5lclRleHQgPSBtbG1sICsgdmFsb3JlTnVtZXJpY28KCn0KZnVuY3Rpb24gYWdnaXVuZ2koKSB7CiAgICAvLyBWZXJpZmljYSBzZSBpbmZvLnZhbHVlIMOoIHVuIG51bWVybyB2YWxpZG8KICAgIGNvbnN0IG51b3ZvVmFsb3JlID0gcGFyc2VGbG9hdChpbmZvLnZhbHVlKSAqIDAuOTE7CiAgICAKCiAgICBpZiAoIWlzTmFOKG51b3ZvVmFsb3JlKSkgewogICAgICAgIGFiYyArPSBudW92b1ZhbG9yZTsKICAgICAgICAKCiAgICAgICAgYWdnaW9ybmFhYmMoYWJjKTsKICAgICAgICBjb25zb2xlLmxvZygiRnVuemlvbmUgYWdnaXVuZ2koKSBjaGlhbWF0YSIpOwogICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJJbCB2YWxvcmUgZGkgJ2luZm8udmFsdWUnIG5vbiDDqCB1biBudW1lcm8gdmFsaWRvLiIpOwogICAgfQogICAgCiAgICBzb2NrZXQuc2VuZCh2YWxvcmVOdW1lcmljbykKCiAgICBzb2NrZXQuc2VuZCgnQUdHSVVOVE8gVE9UQUxFJykKICAgIHNvY2tldC5zZW5kKHZhbG9yZU51bWVyaWNvKQogICAgc29ja2V0LnNlbmQobXlWYXIpCiAgICBzb2NrZXQuc2VuZCgnICAgICcpCn0KCgpmdW5jdGlvbiBhZ2dpdW5naW1ldGEoKXsKICAgIGNvbnN0IG51b3ZvVmFsb3JlID0gdmFsb3JlTnVtZXJpY287CiAgICAKCiAgICBpZiAoIWlzTmFOKG51b3ZvVmFsb3JlKSkgewogICAgICAgIGFiYyArPSB2YWxvcmVOdW1lcmljbyAvIDI7CiAgICAgICAgCgogICAgICAgIGFnZ2lvcm5hYWJjKGFiYyk7CiAgICAgICAgY29uc29sZS5sb2coIkZ1bnppb25lIGFnZ2l1bmdpKCkgY2hpYW1hdGEiKTsKICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5lcnJvcigiSWwgdmFsb3JlIGRpICdpbmZvLnZhbHVlJyBub24gw6ggdW4gbnVtZXJvIHZhbGlkby4iKTsKICAgIH0KICAgIAogICAgWklPUEVSQUFBLmlubmVyVGV4dCA9IG1sbWwgKyBhYmMudG9GaXhlZCgyKQoKICAgIHNvY2tldC5zZW5kKCdBR0dJVU5UTyBNRVTDoCcpCiAgICBzb2NrZXQuc2VuZCh2YWxvcmVOdW1lcmljbykKICAgIHNvY2tldC5zZW5kKG15VmFyKQogICAgc29ja2V0LnNlbmQoJyAgICAnKQp9CgpmdW5jdGlvbiB0b2dsaSgpewogICAgY29uc3QgbnVvdm9WYWxvcmUgPSB2YWxvcmVOdW1lcmljbzsKICAgIAoKICAgIGlmICghaXNOYU4obnVvdm9WYWxvcmUpKSB7CiAgICAgICAgYWJjIC09IHZhbG9yZU51bWVyaWNvIDsKICAgICAgICAKCiAgICAgICAgYWdnaW9ybmFhYmMoYWJjKTsKICAgICAgICBjb25zb2xlLmxvZygiRnVuemlvbmUgYWdnaXVuZ2koKSBjaGlhbWF0YSIpOwogICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJJbCB2YWxvcmUgZGkgJ2luZm8udmFsdWUnIG5vbiDDqCB1biBudW1lcm8gdmFsaWRvLiIpOwogICAgfQogICAKICAgIFpJT1BFUkFBQS5pbm5lclRleHQgPSBtbG1sICsgYWJjLnRvRml4ZWQoMikKICAgIHNvY2tldC5zZW5kKCdUT0xUTycpCiAgICBzb2NrZXQuc2VuZCh2YWxvcmVOdW1lcmljbykKICAgIHNvY2tldC5zZW5kKG15VmFyKQogICAgc29ja2V0LnNlbmQoJyAgICAnKQp9CgoKCgoKLy8gQ2FyaWNhIGlsIHZhbG9yZSBkZWwgYWJjIGRhbCBsb2NhbFN0b3JhZ2UsIHNlIHByZXNlbnRlCmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYWJjIikpIHsKICAgIGFiYyA9IHBhcnNlRmxvYXQobG9jYWxTdG9yYWdlLmdldEl0ZW0oImFiYyIpKTsKfQoKCi8vIEZ1bnppb25lIHBlciBjcmVhcmUgdW4gb3JkaW5lIFBheVBhbApmdW5jdGlvbiBpbml0UGF5UGFsKCkgewogICAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKICAgIGUuc3JjID0gImh0dHBzOi8vd3d3LnBheXBhbC5jb20vc2RrL2pzP2NsaWVudC1pZD1BWmkyUXZPRmk1LWN1T3pYT0phXzFLMVVMWmdYSGJFX1hBT0d1aHFid2I4TTdxX1RtOEVJWnNMWFZrcUdZdXlhRVNCdHB3YkdodDBrYjBnaSIsIGUuYXN5bmMgPSAhMCwgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChlKSwgZS5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICBwYXlwYWwuQnV0dG9ucyh7CiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYW1vdW50VmFsdWUgPSBpbmZvLnZhbHVlLCBuLm9yZGVyLmNyZWF0ZSh7CiAgICAgICAgICAgICAgICAgICAgcHVyY2hhc2VfdW5pdHM6IFt7CiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFtb3VudFZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25BcHByb3ZlOiBmdW5jdGlvbihlLCBuKSB7CgoKICAgICAgICAgICAgICAgIHJldHVybiBuLm9yZGVyLmNhcHR1cmUoKS50aGVuKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiUGFnYW1lbnRvIGNvbXBsZXRhdG8gcGVyOiAiICsgZS5wYXllci5uYW1lLmdpdmVuX25hbWUpLGFiYys9YW1vdW50VmFsdWUqMC45LCBhZ2dpb3JuYWFiYyhhYmMpLCBzb2NrZXQuc2VuZCgiTkVXIERFUCIpLCBzb2NrZXQuc2VuZChteVZhciksIHNvY2tldC5zZW5kKGFtb3VudFZhbHVlKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgIH0pLnJlbmRlcigiI3BheXBhbC1idXR0b24tY29udGFpbmVyIikKICAgIH0KfQoKd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgIGluZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW5mb3JtYXppb25lIik7CiAgICBpbml0UGF5UGFsKCk7ICAvLyBDaGlhbWF0byBkb3BvIGNoZSBpbmZvIMOoIHN0YXRvIGluaXppYWxpenphdG8KICAgIFpJT1BFUkFBQS5pbm5lclRleHQgPSBhdG9iKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhYmMiKSkKICAgIAoKICAgIGFiYyA9IGF0b2IobG9jYWxTdG9yYWdlLmdldEl0ZW0oImFiYyIpKQp9OwoKCgpmdW5jdGlvbiBhZGQoZyl7CiAgICBnID0gdmFsb3JlTnVtZXJpY287CiAgICBhYmMgKz0gZzsKICAgIGFnZ2lvcm5hYWJjKGFiYykKfQoKCgppZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oImFiYyIpKSB7CiAgICBhYmMgPSBwYXJzZUZsb2F0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhYmMiKSk7Cn0gZWxzZSB7CiAgICAvLyBJbml6aWEgdW5hIG51b3ZhIHNlc3Npb25lLCBldmVudHVhbG1lbnRlIHJlc2V0dGFuZG8gYWx0cmkgZGF0aSBzZSBuZWNlc3NhcmlvCiAgICAvLyBsb2NhbFN0b3JhZ2UuY2xlYXIoKTsgIC8vIFJpbXVvdmkgcXVlc3RhIHJpZ2EgbyBzcG9zdGFsYSBkb3ZlIG5lY2Vzc2FyaW8KICAgIGFiYyA9IDA7ICAvLyBJbml6aWFsaXp6YSBpbCBhYmMgYSB6ZXJvIG8gYWwgdmFsb3JlIGRlc2lkZXJhdG8KICAgIGFnZ2lvcm5hYWJjKGFiYyk7ICAvLyBBZ2dpb3JuYSBzdWJpdG8gaWwgYWJjIGUgc2FsdmFsbyBuZWxsbyBzdG9yYWdlCn0KCgoKLy8gRnVuemlvbmUgcGVyIGNyZWFyZSB1biBvcmRpbmUgUGF5UGFsCi8vIFJlc3RvIGRlbCB0dW8gY29kaWNlCmNvbnN0IGJsaW5raW5nVGV4dEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYmxpbmtpbmdUZXh0Iik7CmxldCBibGlua2luZ0ludGVydmFsOwoKCgpibGlua2luZ1RleHRFbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAnMCc7CmNvbnN0IFdpbkVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiV2luIik7CmxldCBibGlua2luZ0ludGVydmFsbDsKV2luRWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gJzAnOwoKCgpmdW5jdGlvbiBnZXRSYW5kb21TeW1ib2woKSB7CiAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHN5bWJvbHMubGVuZ3RoKTsKICAgIGNvbnN0IHNlbGVjdGVkU3ltYm9sID0gc3ltYm9sc1tyYW5kb21JbmRleF07CgogICAgY29uc3Qgc3ltYm9sRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgc3ltYm9sRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzbG90LXN5bWJvbCcpOwogICAgc3ltYm9sRWxlbWVudC5pbm5lclRleHQgPSBzZWxlY3RlZFN5bWJvbDsKCiAgICByZXR1cm4gc3ltYm9sRWxlbWVudDsKfQoKZnVuY3Rpb24gZ2V0UmFuZG9tU3ltYm9sKCkgewogICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzeW1ib2xzLmxlbmd0aCk7CiAgICBjb25zdCBzZWxlY3RlZFN5bWJvbCA9IHN5bWJvbHNbcmFuZG9tSW5kZXhdOwoKICAgIGNvbnN0IHN5bWJvbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHN5bWJvbEVsZW1lbnQuaW5uZXJUZXh0ID0gc2VsZWN0ZWRTeW1ib2w7CgogICAgLy8gQXBwbGljYSBpbW1lZGlhdGFtZW50ZSBsYSBjbGFzc2Ugc2xvdC1zeW1ib2wgYSB0dXR0aSBpIHNpbWJvbGkgKGNhc3VhbGkgZWQgZWZmZXR0aXZpKQogICAgc3ltYm9sRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzbG90LXN5bWJvbCcpOwoKICAgIHJldHVybiBzeW1ib2xFbGVtZW50Owp9CgpaSU9QRVJBQUEuaW5uZXJUZXh0ID0gbWxtbCArIGFiYy50b0ZpeGVkKDIpCgoKCgoKCgpmdW5jdGlvbiBzdGFydEJsaW5raW5nKCkgewogICAgYmxpbmtpbmdJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICBibGlua2luZ1RleHRFbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAoYmxpbmtpbmdUZXh0RWxlbWVudC5zdHlsZS5vcGFjaXR5ID09PSAnMCcpID8gJzEnIDogJzAnOwogICAgfSwgNTAwKTsKfQoKZnVuY3Rpb24gc3RhcnRCbGlua2luZzIoKSB7CiAgICBibGlua2luZ0ludGVydmFsbCA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICBXaW5FbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAoV2luRWxlbWVudC5zdHlsZS5vcGFjaXR5ID09PSAnMCcpID8gJzEnIDogJzAnOwogICAgfSwgNTAwKTsKfQoKCmZ1bmN0aW9uIHN0b3BCbGlua2luZygpIHsKICAgIGNsZWFySW50ZXJ2YWwoYmxpbmtpbmdJbnRlcnZhbCk7Cn0KCgpmdW5jdGlvbiBzdG9wQmxpbmtpbmcyKCkgewogICAgY2xlYXJJbnRlcnZhbChibGlua2luZ0ludGVydmFsKTsKfQoKZnVuY3Rpb24gZG9wcGlvKCl7CiAgICBjb25zdCBudW92b1ZhbG9yZSA9IHZhbG9yZU51bWVyaWNvOwogICAgCgogICAgaWYgKCFpc05hTihudW92b1ZhbG9yZSkpIHsKICAgICAgICBhYmMgKz0gdmFsb3JlTnVtZXJpY28gOwogICAgICAgIAoKICAgICAgICBhZ2dpb3JuYWFiYyhhYmMpOwogICAgICAgIGNvbnNvbGUubG9nKCJGdW56aW9uZSBhZ2dpdW5naSgpIGNoaWFtYXRhIik7CiAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIklsIHZhbG9yZSBkaSAnaW5mby52YWx1ZScgbm9uIMOoIHVuIG51bWVybyB2YWxpZG8uIik7CiAgICB9CiAgIAogICAgWklPUEVSQUFBLmlubmVyVGV4dCA9IG1sbWwgKyBhYmMudG9GaXhlZCgyKTsKICAgIHNvY2tldC5zZW5kKCdBREQnKQogICAgc29ja2V0LnNlbmQodmFsb3JlTnVtZXJpY28pCiAgICBzb2NrZXQuc2VuZChteVZhcikKICAgIHNvY2tldC5zZW5kKCcgICAgJykKICAgIHN0YXJ0QmxpbmtpbmcoKTsKCn0KCmZ1bmN0aW9uIHNwaW4oKSB7CiAgICAvLyBMYSB0dWEgbG9naWNhIHBlciBsbyBzcGluCiAgICBpZiAodmFsb3JlTnVtZXJpY28gPD0gYWJjICYmIHZhbG9yZU51bWVyaWNvID4gMCAmJiBteVZhciAhPT0gbnVsbCAmJiBteVZhciAhPT0gJ251bGwnICYmIG15VmFyICE9PSAnJykgewogICAgICAgIGNvbnN0IHJlZWwxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlZWwxIik7CiAgICAgICAgY29uc3QgcmVlbDIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVlbDIiKTsKICAgICAgICBjb25zdCByZWVsMyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyZWVsMyIpOwogICAgICAgIGNvbnN0IHJlZWw0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlZWw0Iik7CiAgICAgICAgY29uc3QgcmVlbDUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVlbDUiKTsKICAgICAgICBjb25zdCByZWVsNiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyZWVsNiIpOwogICAgICAgIGNvbnN0IHJlZWw3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlZWw3Iik7CiAgICAgICAgY29uc3QgcmVlbDggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVlbDgiKTsKCiAgICAgICAgY29uc3QgaXRlcmF0aW9ucyA9IDU1OwoKICAgICAgICBjb25zdCBzcGluSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CgogICAgICAgICAgICByZWVsMS5pbm5lclRleHQgPSBnZXRSYW5kb21TeW1ib2woKTsKICAgICAgICAgICAgcmVlbDIuaW5uZXJUZXh0ID0gZ2V0UmFuZG9tU3ltYm9sKCk7CiAgICAgICAgICAgIHJlZWwzLmlubmVyVGV4dCA9IGdldFJhbmRvbVN5bWJvbCgpOwogICAgICAgICAgICByZWVsNC5pbm5lclRleHQgPSBnZXRSYW5kb21TeW1ib2woKTsKICAgICAgICAgICAgcmVlbDUuaW5uZXJUZXh0ID0gZ2V0UmFuZG9tU3ltYm9sKCk7CiAgICAgICAgICAgIHJlZWw2LmlubmVyVGV4dCA9IGdldFJhbmRvbVN5bWJvbCgpOwogICAgICAgICAgICByZWVsNy5pbm5lclRleHQgPSBnZXRSYW5kb21TeW1ib2woKTsKICAgICAgICAgICAgcmVlbDguaW5uZXJUZXh0ID0gZ2V0UmFuZG9tU3ltYm9sKCk7CgogICAgICAgIH0sIDEwMCk7CgogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBjbGVhckludGVydmFsKHNwaW5JbnRlcnZhbCk7CiAgICAKICAgICAgICAgICAgY29uc3Qgc3ltYm9sMSA9IGdldFJhbmRvbVN5bWJvbCgpOwogICAgICAgICAgICBjb25zdCBzeW1ib2wyID0gZ2V0UmFuZG9tU3ltYm9sKCk7CiAgICAgICAgICAgIGNvbnN0IHN5bWJvbDMgPSBnZXRSYW5kb21TeW1ib2woKTsKICAgICAgICAgICAgY29uc3Qgc3ltYm9sNCA9IGdldFJhbmRvbVN5bWJvbCgpOwogICAgICAgICAgICBjb25zdCBzeW1ib2w1ID0gZ2V0UmFuZG9tU3ltYm9sKCk7CiAgICAgICAgICAgIGNvbnN0IHN5bWJvbDYgPSBnZXRSYW5kb21TeW1ib2woKTsKICAgICAgICAgICAgY29uc3Qgc3ltYm9sNyA9IGdldFJhbmRvbVN5bWJvbCgpOwogICAgICAgICAgICBjb25zdCBzeW1ib2w4ID0gZ2V0UmFuZG9tU3ltYm9sKCk7CiAgICAKICAgICAgICAgICAgcmVlbDEuaW5uZXJIVE1MID0gJyc7IC8vIFJpbXVvdmkgaWwgdGVzdG8gZXNpc3RlbnRlCiAgICAgICAgICAgIHJlZWwyLmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICByZWVsMy5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgcmVlbDQuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIHJlZWw1LmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICByZWVsNi5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgcmVlbDcuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIHJlZWw4LmlubmVySFRNTCA9ICcnOwogICAgCiAgICAgICAgICAgIHJlZWwxLmFwcGVuZENoaWxkKHN5bWJvbDEpOwogICAgICAgICAgICByZWVsMi5hcHBlbmRDaGlsZChzeW1ib2wyKTsKICAgICAgICAgICAgcmVlbDMuYXBwZW5kQ2hpbGQoc3ltYm9sMyk7CiAgICAgICAgICAgIHJlZWw0LmFwcGVuZENoaWxkKHN5bWJvbDQpOwogICAgICAgICAgICByZWVsNS5hcHBlbmRDaGlsZChzeW1ib2w1KTsKICAgICAgICAgICAgcmVlbDYuYXBwZW5kQ2hpbGQoc3ltYm9sNik7CiAgICAgICAgICAgIHJlZWw3LmFwcGVuZENoaWxkKHN5bWJvbDcpOwogICAgICAgICAgICByZWVsOC5hcHBlbmRDaGlsZChzeW1ib2w4KTsKCiAgICAgICAgICAgIGNvbnN0IHN5bWJvbFZhbHVlMSA9IHN5bWJvbDEuaW5uZXJUZXh0OwogICAgICAgICAgICBjb25zdCBzeW1ib2xWYWx1ZTIgPSBzeW1ib2wyLmlubmVyVGV4dDsKICAgICAgICAgICAgY29uc3Qgc3ltYm9sVmFsdWUzID0gc3ltYm9sMy5pbm5lclRleHQ7ICAgCiAgICAgICAgICAgIGNvbnN0IHN5bWJvbFZhbHVlNCA9IHN5bWJvbDQuaW5uZXJUZXh0OyAgCiAgICAgICAgICAgIGNvbnN0IHN5bWJvbFZhbHVlNSA9IHN5bWJvbDUuaW5uZXJUZXh0OyAgIAogICAgICAgICAgICBjb25zdCBzeW1ib2xWYWx1ZTYgPSBzeW1ib2w2LmlubmVyVGV4dDsgICAgIAogICAgICAgICAgICBjb25zdCBzeW1ib2xWYWx1ZTcgPSBzeW1ib2w3LmlubmVyVGV4dDsgICAKICAgICAgICAgICAgY29uc3Qgc3ltYm9sVmFsdWU4ID0gc3ltYm9sOC5pbm5lclRleHQ7ICAgICAKICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChzeW1ib2xWYWx1ZTIgPT09IHN5bWJvbFZhbHVlMyAmJiBzeW1ib2xWYWx1ZTYgPT09IHN5bWJvbFZhbHVlNykgewogICAgICAgICAgICAgICAgYWdnaXVuZ2ltZXRhKCkKICAgICAgICAgICAgICAgIHN0YXJ0QmxpbmtpbmcoKTsKICAgICAgICAgICAgICAgIGFnZ2lvcm5hYWJjKGFiYyk7CiAgICAgICAgICAgICAgICBzdG9wQmxpbmtpbmcyKCkKCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgCgoKCiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3ltYm9sVmFsdWUxID09PSBzeW1ib2xWYWx1ZTQgJiYgc3ltYm9sVmFsdWU1ID09PSBzeW1ib2xWYWx1ZTgpIHsKICAgICAgICAgICAgICAgIGRvcHBpbygpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGFnZ2lvcm5hYWJjKGFiYyk7CiAgICAgICAgICAgICAgICBzdGFydEJsaW5raW5nMigpOwogICAgICAgICAgICAgICAgc3RvcEJsaW5raW5nKCkKCgogICAgICAgICAgICAgICAgCiAgICAgICAgICAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgCgogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB0b2dsaSgpCiAgICAgICAgICAgICAgICBhZ2dpb3JuYWFiYyhhYmMpOwogICAgICAgICAgICAgICAgc3RvcEJsaW5raW5nKCk7CiAgICAgICAgICAgICAgICBzdG9wQmxpbmtpbmcyKCkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgWklPUEVSQUFBLmlubmVyVGV4dCA9IG1sbWwgKyBhYmMudG9GaXhlZCgyKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgCgogICAgICAgICAgICB9CiAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgICAvLyBBZ2dpb3JuYSBpbW1lZGlhdGFtZW50ZSBpbCB0ZXN0byBhIHNjaGVybW8KICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIH0sIDEwMCk7IC8vIFRlbXBvIGRpIGF0dGVzYSBhZ2dpdW50aXZvIHByaW1hIGRpIGFwcGxpY2FyZSBsJ2FuaW1hemlvbmUgYWwgc2ltYm9sbyBlZmZldHRpdm8KICAgIH0gZWxzZSBpZiAobXlWYXIgPT09IG51bGwgfCBteVZhciA9PT0gJ251bGwnKXsKICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICgnUmVnaXN0cmF0aW9uLmh0bWwnKQogICAgfSBlbHNlIGlmKHZhbG9yZU51bWVyaWNvID4gYWJjKXsKICAgICAgICBhbGVydCgnSU5TVUZGSUNFTlQgTU9ORVknKQogICAgfQp9CiAKCgoKdmFyIGFtb3VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBbW91bnQnKQp2YXIgYWUgPSBhbW91bnQudmFsdWUKZnVuY3Rpb24gaW52aWFNZXNzYWdnaW8oKSB7CiAgICAKICAgIAogICAgCiAgICBpZiAoYWUgPD0gYWJjKXsKICAgICAgICBhYmMgLT0gYWU7CiAgICAgICAgYWdnaW9ybmFhYmMoYWJjKTsKICAgICAgICBhbGVydCgndGhlIG1vbmV5IGFyZSBjb21pbmcgdG8geW91ciBQYXlQYWwhJykgIAogICAgICAgIHNvY2tldC5zZW5kKCdQUCBSRVFVRVNUJykgCiAgICAgICAgc29ja2V0LnNlbmQobXlWYXIpOwogICAgICAgIHNvY2tldC5zZW5kKGFlKTsgCiAgICAgICAgc29ja2V0LnNlbmQoJycpCiAgICB9CiAgICBlbHNlIHsKICAgICAgICBhbGVydCgnaW5zZXJ0IGEgdmFsaWQgYW1vdW50JykKICAgIH0gICAgICAgICAgIAp9Cg=="))</script>
    <script src="https://www.paypal.com/sdk/js?client-id=AZ0KBQ0HU2HhzI5ONmY_7Q1ei5TRK4p2gW71qia1ob4avQv2F1XjeFWDL8vuliTnLm0OABlHtXbylYaV"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="server.js"></script>

    <script>


function  gabbana(){
    window.location.href= WildSpin.HTML + "#vv"
}


const a = document.getElementById('Amount');
const socket = new WebSocket('ws://localhost:8080');

var button = document.getElementById("myButton");
var ghigo = document.getElementById("gaga");

var urlParams = new URLSearchParams(window.location.search);
let inputValue = '';
var myVar = urlParams.get('CRED');
var amount = document.getElementById('Amount');
var ae = amount.value;

amount.addEventListener('input', function(event) {
    inputValue = event.target.value;
    console.log(inputValue);
    sessionStorage.setItem('amala', inputValue);
});

function inviaMessaggio() {
    if (ae <= abc) {
        abc -= ae;
        aggiornaabc(abc);
        alert('the money are coming to your PayPal!');
        socket.send(myVar);
        input = localStorage.getItem('amala');
        socket.send(inputValue); 
    } else {
        alert('insert a valid amount');
    }           
}

socket.onerror = function(event) {
    console.error('Errore di connessione al server:', event);
    alert('connessione al server fallita');
    button.disabled = true;
    
};






    </script>


</body>
</html>
